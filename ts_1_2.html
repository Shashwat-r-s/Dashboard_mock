<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Behavioral Crypto Portfolio Intelligence Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1b3a 50%, #0f1419 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: auto;
        }
        
        .dashboard-container {
            padding: 20px;
            max-width: 1600px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 25px;
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shimmer 3s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .header h1 {
            font-size: 2.8rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
        }
        
        .main-grid {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }
        
        .sidebar {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 25px;
            height: fit-content;
            position: sticky;
            top: 20px;
        }
        
        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }
        
        .widget {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .widget::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .widget:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
        }
        
        .widget:hover::before {
            opacity: 1;
        }
        
        .widget-title {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #a855f7;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .full-width {
            grid-column: 1 / -1;
        }
        
        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .metric-card {
            background: linear-gradient(135deg, #1e293b, #374151);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: transform 0.2s ease;
        }
        
        .metric-card:hover {
            transform: scale(1.05);
        }
        
        .metric-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .metric-label {
            color: #9ca3af;
            font-size: 0.9rem;
        }
        
        .positive { color: #10b981; }
        .negative { color: #ef4444; }
        .warning { color: #f59e0b; }
        .neutral { color: #6b7280; }
        
        .chart-container {
            position: relative;
            height: 350px;
            margin-top: 15px;
        }
        
        .correlation-matrix {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
            margin-top: 15px;
        }
        
        .correlation-cell {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
            transition: transform 0.2s ease;
        }
        
        .correlation-cell:hover {
            transform: scale(1.1);
            z-index: 10;
        }
        
        .risk-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .risk-gauge {
            width: 150px;
            height: 150px;
            margin: 0 auto;
            position: relative;
        }
        
        .allocation-chart {
            height: 300px;
            position: relative;
        }
        
        .performance-comparison {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .performance-card {
            background: linear-gradient(135deg, #1f2937, #374151);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            border-left: 4px solid;
        }
        
        .btc-card { border-left-color: #f7931a; }
        .eth-card { border-left-color: #627eea; }
        .portfolio-card { border-left-color: #a855f7; }
        
        .volatility-surface {
            height: 250px;
            background: linear-gradient(45deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            border-radius: 12px;
            position: relative;
            margin-top: 15px;
        }
        
        .distribution-chart {
            height: 200px;
            margin-top: 15px;
        }
        
        .behavioral-indicators {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        
        .indicator {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        
        .indicator-value {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .network-health {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .health-indicator {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
        }
        
        .health-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin: 0 auto 5px;
        }
        
        .strong-health { background: #10b981; }
        .moderate-health { background: #f59e0b; }
        .weak-health { background: #ef4444; }
        
        .optimization-panel {
            background: linear-gradient(135deg, #1e293b, #334155);
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
        }
        
        .optimization-suggestion {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #8b5cf6;
        }
        
        .scenario-controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .slider-control {
            text-align: center;
        }
        
        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #374151;
            outline: none;
            margin: 10px 0;
        }
        
        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }
        
        .crypto-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        
        .btc-icon { background: linear-gradient(45deg, #f7931a, #ffb84d); }
        .eth-icon { background: linear-gradient(45deg, #627eea, #8fa5ff); }
        .ada-icon { background: linear-gradient(45deg, #0033ad, #4d79ff); }
        .sol-icon { background: linear-gradient(45deg, #00d4ff, #66e0ff); }
        .dot-icon { background: linear-gradient(45deg, #e6007a, #ff4da6); }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        .data-table th,
        .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .data-table th {
            background: rgba(255, 255, 255, 0.05);
            font-weight: 600;
        }
        
        .confidence-band {
            fill: rgba(102, 126, 234, 0.2);
            stroke: none;
        }
        
        .confidence-line {
            fill: none;
            stroke: #667eea;
            stroke-width: 2;
        }
        
        @media (max-width: 1200px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            .content-grid {
                grid-template-columns: 1fr;
            }
            .metric-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .metric-grid {
                grid-template-columns: 1fr;
            }
            .scenario-controls {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div class="header">
		<div style="position:absolute; top:15px; right:15px; display:flex; 			gap:10px; z-index:10;">
 	 <button id="themeToggle" style="padding:6px 10px; border-radius:6px; 			border:none; background:#1e293b; color:#f1f5f9; cursor:pointer;">üåó Mode</button>
  	<button id="helpBtn" style="padding:6px 10px; border-radius:6px; border:none; background:#1e293b; color:#f1f5f9; cursor:pointer;">‚ùì Help</button>
</div>
            <h1>üß† Advanced Crypto Portfolio Intelligence</h1>
            
        </div>
        
        <div class="main-grid">
            <!-- Sidebar Controls -->
            <div class="widget" style="opacity: 1; transform: translateY(0px); transition: opacity 0.8s, transform 0.8s;">
  <div class="widget-title">Portfolio Configuration</div>

  <!-- Portfolio Value -->
  

  <!-- OR Divider -->
<div style="margin-bottom: 20px;">
    <label style="display: block; margin-bottom: 10px; color: #9ca3af;">Upload Existing Portfolio</label>
    <input type="file" id="portfolioUpload" accept=".csv,.json" style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.05); color: white;">
  </div><div style="text-align: center; margin: 15px 0; color: #9ca3af; font-size: 0.85rem;">
  ‚Äî OR (Create a Portfolio) ‚Äî
</div>
  

  
  

  
  

  

  
  

  
  

  <div style="margin-bottom: 20px;">
    <label style="display: block; margin-bottom: 10px; color: #9ca3af;">Portfolio Date</label>
    <input type="date" id="portfolioDate" style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.05); color: white;">
  </div><!-- Add New Crypto -->
  <div style="margin-bottom: 20px;">
  <label style="display: block; margin-bottom: 10px; color: #9ca3af;">Add New Crypto</label>

  <!-- Symbol -->
  <input id="sym" placeholder="Symbol (e.g., BTC)" style="width: 100%; margin-bottom: 10px; padding: 8px; border-radius: 6px; 
           border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.05); color: white;">

  <!-- Units -->
  <input id="units" type="number" step="any" placeholder="Units" style="width: 100%; margin-bottom: 10px; padding: 8px; border-radius: 6px; 
           border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.05); color: white;">

  <!-- Price -->
   <!-- Note instead of price input -->
  <div style="font-size: 0.8rem; color: #9ca3af; margin-bottom: 10px;">
    üí° Price will be taken as per the date selected above.
  </div>

  <!-- Add Button -->
  <button onclick="addCrypto()" style="width: 100%; padding: 10px; background: linear-gradient(45deg,#667eea,#764ba2); 
           border: none; border-radius: 6px; color: white; font-weight: 600; cursor: pointer;">
    Add
  </button>
</div>



  <!-- Holdings Table -->
  <table style="width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 0.85rem; color: #9ca3af;">
  <thead>
    <tr style="color: #e5e7eb; text-align: left;">
      <th>Asset</th>
      <th>Units</th>
      <th>Price</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody id="holdings">
    <tr>
      <td>BTC</td><td>0.8</td><td>$65,000</td><td>$52,000</td>
    </tr>
    <tr>
      <td>ETH</td><td>5</td><td>$3,000</td><td>$15,000</td>
    </tr>
    <tr>
      <td>SOL</td><td>100</td><td>$30</td><td>$3,000</td>
    </tr>
  </tbody>
</table>

<!-- Totals Row -->
<div style="display: flex; justify-content: space-between; margin-top: 10px; color: #9ca3af;">
  <div>Total Value: <strong id="totVal">$70,000</strong></div>
  <div>#Assets: <strong id="totAssets">3</strong></div>
</div>


  <!-- Totals -->
  <div style="display: flex; justify-content: space-between; margin-top: 10px; color: #9ca3af;">
    <div><strong id="totVal"></strong></div>
    <div><strong id="totAssets"></strong></div>
  </div>

  <!-- Optimize Button -->
  
<div style="margin-bottom: 20px;">
    <div style="color: #a855f7; font-weight: 600; margin-bottom: 10px;"> Current Allocation</div>
    <div style="font-size: 0.9rem; color: #9ca3af;">
      <div style="display: flex; justify-content: space-between; margin: 5px 0;">
        <span>Bitcoin</span> <span>48.2%</span>
      </div>
      <div style="display: flex; justify-content: space-between; margin: 5px 0;">
        <span>Ethereum</span> <span>25.1%</span>
      </div>
      <div style="display: flex; justify-content: space-between; margin: 5px 0;">
        <span>Solana</span> <span>8.3%</span>
      </div>
      <div style="display: flex; justify-content: space-between; margin: 5px 0;">
        <span>Cardano</span> <span>12.7%</span>
      </div>
      <div style="display: flex; justify-content: space-between; margin: 5px 0;">
        <span>Polkadot</span> <span>5.7%</span>
      </div>
    </div>
  </div></div>

            
            <!-- Main Content -->
            <div class="content-grid">
                <!-- Key Performance Indicators -->
                <div class="widget full-width" style="opacity: 1; transform: translateY(0px); transition: opacity 0.8s, transform 0.8s;">
                    <div class="widget-title">üìä Portfolio Performance Metrics</div>
                    <div class="metric-grid">
                        <div class="metric-card">
                            <div class="metric-value positive">+12.7%</div>
                            <div class="metric-label">Annual Return</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value warning">34.2%</div>
                            <div class="metric-label">Volatility (œÉ)</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value positive">1.34</div>
                            <div class="metric-label">Sharpe Ratio</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value negative">-18.7%</div>
                            <div class="metric-label">Max Drawdown</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value warning">-$4,892</div>
                            <div class="metric-label">VaR (95%, 1-day)</div>
                        </div>
                        
                    </div>
                </div>
                
                <!-- Portfolio Performance with Confidence Intervals -->
                <div class="widget" style="opacity: 1; transform: translateY(0px); transition: opacity 0.8s, transform 0.8s;">
                    <div class="widget-title">üìà Performance vs Benchmarks</div>
			<div style="margin-bottom:12px; text-align:right;">
    <label for="benchmarkSelect" style="color:#9ca3af; font-size:.85rem; margin-right:6px;">Benchmark:</label>
    <select id="benchmarkSelect" style="padding:6px 10px; border-radius:8px; 
        background:#1e293b; color:#f1f5f9; border:1px solid #334155; font-size:.9rem;">
      <option value="60/40">60/40 Portfolio</option>
      <option value="S&amp;P500">S&amp;P 500</option>
      <option value="CryptoIndex">Crypto Index</option>
      <option value="Custom">Custom Benchmark</option>
    </select>
  </div>
                    <div class="chart-container">
                        <canvas id="performanceChart" width="354" height="350" style="display: block; box-sizing: border-box; height: 350px; width: 354px;"></canvas>
                    </div>
                    <div style="margin-top: 15px; font-size: 0.9rem; color: #9ca3af;">
                        <strong>95% Confidence Interval:</strong> Portfolio shows 73% probability of outperforming 60/40 benchmark over 12-month horizon.
                    </div>
                </div>
                
                <!-- Risk Decomposition -->
                <!-- Risk Decomposition Widget -->
<div class="widget">
  <div class="widget-title">‚ö° Risk Decomposition Analysis</div>
  
  <div class="chart-container" style="height: 300px;">
    <canvas id="riskChart" width="354" height="300" style="display: block; box-sizing: border-box; height: 300px; width: 354px;"></canvas>
  </div>

  <div class="risk-metrics" style="display: flex; justify-content: space-around; margin-top: 15px;">
    <div style="text-align: center;">
      <div style="font-size: 1.2rem; font-weight: 600; color: #f59e0b;">73.4%</div>
      <div style="color: #9ca3af; font-size: 0.9rem;">Crypto Risk Contribution</div>
    </div>
    <div style="text-align: center;">
      <div style="font-size: 1.2rem; font-weight: 600; color: #10b981;">0.67</div>
      <div style="color: #9ca3af; font-size: 0.9rem;">Diversification Ratio</div>
    </div>
  </div>
</div>

<!-- Chart.js (CDN) -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const ctx = document.getElementById('riskChart');

new Chart(ctx, {
  type: 'doughnut',
  data: {
    labels: ['Bitcoin', 'Ethereum', 'Solana', 'Cardano', 'Polkadot'],
    datasets: [{
      data: [48.2, 25.1, 8.3, 12.7, 5.7],
      backgroundColor: ['#F7931A','#627EEA','#00FFA3','#3CC8C8','#E6007A'],
      borderWidth: 0
    }]
  },
  options: {
    cutout: '60%',
    plugins: {
      legend: { position: 'bottom', labels: { color: '#e5e7eb' } },
      tooltip: { enabled: true }
    },
    responsive: true,
    maintainAspectRatio: false
  }
});
</script>
                
                <!-- Advanced Correlation Matrix -->
                
                
                <!-- Behavioral Finance Indicators -->
                <div class="widget" style="opacity: 1; transform: translateY(0px); transition: opacity 0.8s, transform 0.8s;">
                    <div class="widget-title">üß† Behavioral Bias Detection</div>
                    <div class="behavioral-indicators">
                        <div class="indicator">
                            <div class="indicator-value warning">7.3/10</div>
                            <div style="color: #9ca3af; font-size: 0.9rem;">FOMO Index</div>
                        </div>
                        <div class="indicator">
                            <div class="indicator-value positive">2.1/10</div>
                            <div style="color: #9ca3af; font-size: 0.9rem;">Herding Score</div>
                        </div>
                        <div class="indicator">
                            <div class="indicator-value negative">8.4/10</div>
                            <div style="color: #9ca3af; font-size: 0.9rem;">Overconfidence</div>
                        </div>
                        <div class="indicator">
                            <div class="indicator-value warning">6.7/10</div>
                            <div style="color: #9ca3af; font-size: 0.9rem;">Loss Aversion</div>
                        </div>
                    </div>
                    
                    <div style="background: rgba(255, 69, 58, 0.1); 
            border: 1px solid #ef4444; 
            border-radius: 10px; 
            padding: 15px; 
            margin-top: 15px;">

  <!-- High Risk Alert -->
  <div style="color: #ef4444; font-weight: 600; margin-bottom: 5px;">
    ‚ö†Ô∏è High Risk Alert
  </div>
  <div style="font-size: 0.9rem; margin-bottom: 10px;">
    Overconfidence bias detected: 48% BTC concentration exceeds optimal 35%. 
    Consider systematic rebalancing.
  </div>

  <!-- Loss Aversion Alert -->
  <div class="bias-alert" style="display: flex; align-items: flex-start; gap: 10px; font-size: 0.9rem; color: #fbbf24;">
    <span style="font-size: 1.5rem;">üü°</span>
    <div>
      <strong>Loss Aversion</strong><br>
      <small>Holding underperforming ADA for 127 days. Review exit strategy.</small>
    </div>
  </div>

</div>

                
                <!-- Network Health Indicators -->
                
                
                <!-- Monte Carlo Simulation Results -->
                
                
                <!-- Scenario Analysis -->
                
            </div>
        <div class="widget" style="opacity: 1; transform: translateY(0px); transition: opacity 0.8s, transform 0.8s;">
                    <div class="widget-title">üåê Crypto Network Health</div>
                    <div class="network-health">
                        <div class="health-indicator">
                            <div class="health-dot strong-health"></div>
                            <div style="font-size: 0.8rem; font-weight: 600;">BTC Hash Rate</div>
                            <div style="font-size: 0.9rem; color: #10b981;">Strong</div>
                        </div>
                        <div class="health-indicator">
                            <div class="health-dot strong-health"></div>
                            <div style="font-size: 0.8rem; font-weight: 600;">ETH DeFi TVL</div>
                            <div style="font-size: 0.9rem; color: #10b981;">$67.2B</div>
                        </div>
                        <div class="health-indicator">
                            <div class="health-dot moderate-health"></div>
                            <div style="font-size: 0.8rem; font-weight: 600;">SOL TPS</div>
                            <div style="font-size: 0.9rem; color: #f59e0b;">2,847</div>
                        </div>
                    </div>
                    
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Asset</th>
                                <th>Network Score</th>
                                <th>Developer Activity</th>
                                <th>Social Sentiment</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="crypto-icon btc-icon"></span>Bitcoin</td>
                                <td><span class="positive">9.2/10</span></td>
                                <td><span class="positive">High</span></td>
                                <td><span class="positive">+0.73</span></td>
                            </tr>
                            <tr>
                                <td><span class="crypto-icon eth-icon"></span>Ethereum</td>
                                <td><span class="positive">8.9/10</span></td>
                                <td><span class="positive">Very High</span></td>
                                <td><span class="positive">+0.68</span></td>
                            </tr>
                            <tr>
                                <td><span class="crypto-icon sol-icon"></span>Solana</td>
                                <td><span class="warning">7.1/10</span></td>
                                <td><span class="warning">Medium</span></td>
                                <td><span class="positive">+0.42</span></td>
                            </tr>
                            <tr>
                                <td><span class="crypto-icon ada-icon"></span>Cardano</td>
                                <td><span class="negative">5.8/10</span></td>
                                <td><span class="negative">Low</span></td>
                                <td><span class="negative">-0.23</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div><!-- ===== Portfolio Time-Series Forecast (static demo) ===== -->
<!-- ===== Portfolio Time-Series Forecast (static demo with sample data) ===== -->
<div class="widget full-width" style="opacity:1; transform:translateY(0); transition:opacity .8s, transform .8s;">
  <div class="widget-title">üìà Portfolio Forecast (12‚Äì24M)</div>
<!-- Header with dropdowns -->
  <div style="display:flex; flex-wrap:wrap; justify-content:space-between; align-items:center; margin-bottom:12px;">
    <div style="display:flex; align-items:center; gap:10px;">
      <span style="font-size:1.4rem;">üìä</span>
      <span style="font-weight:700; font-size:1.2rem; color:#f3f4f6;">Forecast Analysis</span>
    </div>
    <div style="display:flex; gap:12px; flex-wrap:wrap;">
      <!-- Target Dropdown -->
      <select id="targetSelect" style="padding:6px 10px; border-radius:8px; background:#1e293b; color:#f1f5f9; border:1px solid #334155;">
        <option>Portfolio</option>
        <option>Bitcoin</option>
        <option>Ethereum</option>
        <option>Altcoin Index</option>
      </select>
      <!-- Model Dropdown -->
      <select id="modelSelect" style="padding:6px 10px; border-radius:8px; background:#1e293b; color:#f1f5f9; border:1px solid #334155;">
        <option>Complex Exponential Smoothing</option>
        <option>Naive</option>
        <option>Simple Exponential Smoothing (ZNN)</option>
        <option>Seasonally Adjusted Naive</option>
        <option>Theta</option>
        <option>Auto ARIMA</option>
        <option>Combination M4 Benchmark</option>
        <option>Holt-Winters (ZNN)</option>
        <option>Damped (ZZN)</option>
        <option>Linear Regression</option>
        <option>RNN</option>
      </select>
    </div>
  </div>
  <div class="chart-container">
    <canvas id="forecastChart" width="786" height="350" style="display: block; box-sizing: border-box; height: 350px; width: 786px;"></canvas>
  </div>
  <div style="margin-top:12px; font-size:.9rem; color:#9ca3af;">
    <strong>Bands:</strong> 50%, 75%, 95% confidence intervals around forecast mean (sample data).
  </div>

 <!-- Accuracy Metrics -->
  <div id="metricsPanel" style="margin-top:18px; padding:15px; background:#1e293b; border-radius:14px;">
    <div style="font-weight:600; font-size:1rem; color:#f9fafb; margin-bottom:10px;">üìè Accuracy Metrics (Sample Data)</div>
    <div style="display:grid; grid-template-columns: repeat(5,1fr); gap:10px; text-align:center; font-size:.9rem; color:#f1f5f9;">
      <div><div style="font-weight:600;">MSE</div><div id="mseVal">1.00</div></div>
      <div><div style="font-weight:600;">WAPE</div><div id="wapeVal">1.00</div></div>
      <div><div style="font-weight:600;">MASE</div><div id="maseVal">1.00</div></div>
      <div><div style="font-weight:600;">SMAPE</div><div id="smapeVal">1.00</div></div>
      <div><div style="font-weight:600;">95% Winkler</div><div id="winklerVal">1.00</div></div>
    </div>
  </div>

</div>

<script>
/* Requires Chart.js v3+ */

(function () {
  const ctx = document.getElementById('forecastChart').getContext('2d');

  const months = [
    '2024-01','2024-02','2024-03','2024-04','2024-05','2024-06','2024-07','2024-08',
    '2024-09','2024-10','2024-11','2024-12',
    '2025-01','2025-02','2025-03','2025-04','2025-05','2025-06','2025-07','2025-08',
    '2025-09','2025-10','2025-11','2025-12'
  ];

  // --- Historical values (first 12 months) ---
  const hist = [0,0.8,1.6,2.5,3.4,4.2,5.0,5.8,6.5,7.2,7.8,8.3];

  // --- Forecast (next 12 months) ---
  const meanF  = [8.6, 9.1, 9.7, 10.3, 10.9, 11.5, 12.1, 12.6, 13.1, 13.5, 13.9, 14.2];
  const low95  = [5.0, 4.7, 4.4, 4.2, 4.0, 3.8, 3.7, 3.6, 3.5, 3.4, 3.3, 3.2];
  const high95 = [12.0, 12.7, 13.3, 13.9, 14.5, 15.1, 15.6, 16.1, 16.6, 17.0, 17.4, 17.8];

  const low75  = [6.3, 6.2, 6.0, 5.9, 5.8, 5.7, 5.6, 5.5, 5.4, 5.3, 5.2, 5.1];
  const high75 = [10.8, 11.3, 11.8, 12.2, 12.7, 13.1, 13.5, 13.9, 14.3, 14.6, 14.9, 15.2];

  const low50  = [7.3, 7.2, 7.1, 7.0, 6.9, 6.8, 6.8, 6.7, 6.7, 6.6, 6.6, 6.5];
  const high50 = [9.7, 10.1, 10.4, 10.7, 11.0, 11.3, 11.6, 11.8, 12.0, 12.2, 12.4, 12.6];

  // Pad historical with nulls so lines align
  const histData   = hist.concat(new Array(12).fill(null));
  const meanData   = new Array(12).fill(null).concat(meanF);
  const low95Data  = new Array(12).fill(null).concat(low95);
  const high95Data = new Array(12).fill(null).concat(high95);
  const low75Data  = new Array(12).fill(null).concat(low75);
  const high75Data = new Array(12).fill(null).concat(high75);
  const low50Data  = new Array(12).fill(null).concat(low50);
  const high50Data = new Array(12).fill(null).concat(high50);

  const ds = [
    { label:'95% CI (low)', data:low95Data, borderWidth:0, pointRadius:0, fill:false },
    { label:'95% CI', data:high95Data, borderWidth:0, pointRadius:0,
      backgroundColor:'rgba(59,130,246,0.15)', fill:{target:0} },
    { label:'75% CI (low)', data:low75Data, borderWidth:0, pointRadius:0, fill:false },
    { label:'75% CI', data:high75Data, borderWidth:0, pointRadius:0,
      backgroundColor:'rgba(16,185,129,0.18)', fill:{target:2} },
    { label:'50% CI (low)', data:low50Data, borderWidth:0, pointRadius:0, fill:false },
    { label:'50% CI', data:high50Data, borderWidth:0, pointRadius:0,
      backgroundColor:'rgba(251,191,36,0.22)', fill:{target:4} },
    { label:'Forecast mean', data:meanData, borderWidth:2, pointRadius:0,
      borderDash:[6,4], tension:0.25, borderColor:'#f97316' },
    { label:'Historical', data:histData, borderWidth:2, pointRadius:2,
      tension:0.25, borderColor:'#e5e7eb' }
  ];

  new Chart(ctx, {
    type:'line',
    data:{ labels:months, datasets:ds },
    options:{
      responsive:true,
      maintainAspectRatio:false,
      interaction:{ mode:'index', intersect:false },
      plugins:{
        legend:{ labels:{ color:'#cbd5e1', usePointStyle:true, boxWidth:10 } },
        tooltip:{ callbacks:{
          label:(ctx)=>{
            const v=ctx.parsed.y;
            return (v==null||isNaN(v))?null:`${ctx.dataset.label}: ${v.toFixed(2)}%`;
          }
        }}
      },
      scales:{
        x:{ ticks:{ color:'#94a3b8', maxRotation:0 },
            grid:{ color:'rgba(148,163,184,0.15)' } },
        y:{ ticks:{ color:'#94a3b8', callback:v=>v+'%' },
            grid:{ color:'rgba(148,163,184,0.12)' } }
      }
    }
  });
})();
</script>


<script>
/* Requires Chart.js v3+ already loaded on the page */

(function () {
  const ctx = document.getElementById('forecastChart').getContext('2d');

  // --- Demo timeline (monthly) ---
  const months = [
    '2024-01','2024-02','2024-03','2024-04','2024-05','2024-06','2024-07','2024-08','2024-09','2024-10','2024-11','2024-12',
    // forecast horizon
    '2025-01','2025-02','2025-03','2025-04','2025-05','2025-06','2025-07','2025-08','2025-09','2025-10','2025-11','2025-12'
  ];

  // --- Historical total return (cumulative, demo numbers) for first 12 months ---
  const hist = [0.0, 0.6, 1.3, 2.4, 3.1, 2.7, 3.6, 4.4, 5.2, 4.9, 5.7, 6.4]; // %

  // --- Forecast mean and bands for next 12 months (all % cumulative change from "now") ---
  // Keep the first 12 entries null so they don‚Äôt draw over the historical segment
  const pad = new Array(12).fill(null);
  const meanF  = pad.concat([6.8, 7.5, 8.1, 8.7, 9.2, 9.6, 10.1, 10.5, 10.9, 11.2, 11.5, 11.8]);

  // For bands we use lower/upper arrays; first 12 months are null to align with history
  const low95  = pad.concat([ 3.0,  2.4,  1.9,  1.2,  0.7,  0.0, -0.5, -0.9, -1.2, -1.4, -1.6, -1.8]);
  const high95 = pad.concat([10.3, 10.9, 11.6, 12.2, 12.8, 13.3, 13.8, 14.2, 14.6, 14.9, 15.3, 15.7]);

  const low75  = pad.concat([ 4.6,  4.1,  3.6,  3.1,  2.7,  2.3,  2.0,  1.7,  1.4,  1.2,  1.0,  0.8]);
  const high75 = pad.concat([ 8.8,  9.4, 10.0, 10.6, 11.0, 11.5, 11.9, 12.3, 12.6, 12.9, 13.2, 13.5]);

  const low50  = pad.concat([ 5.7,  5.3,  4.9,  4.6,  4.3,  4.0,  3.8,  3.6,  3.4,  3.2,  3.0,  2.8]);
  const high50 = pad.concat([ 7.8,  8.3,  8.8,  9.2,  9.6,  9.9, 10.3, 10.6, 10.9, 11.1, 11.3, 11.5]);

  // Build a dataset that draws shaded ‚Äúfans‚Äù by filling upper ‚Üí lower for each band
  const ds = [
    // 95% band
    { label: '95% CI (low)',  data: low95,  borderWidth: 0, pointRadius: 0, fill: false },
    { label: '95% CI',        data: high95, borderWidth: 0, pointRadius: 0,
      backgroundColor: 'rgba(244, 114, 182, 0.18)', // soft rose
      fill: { target: 0 }, },
    // 75% band
    { label: '75% CI (low)',  data: low75,  borderWidth: 0, pointRadius: 0, fill: false },
    { label: '75% CI',        data: high75, borderWidth: 0, pointRadius: 0,
      backgroundColor: 'rgba(248, 113, 113, 0.22)', // soft red
      fill: { target: 2 }, },
    // 50% band
    { label: '50% CI (low)',  data: low50,  borderWidth: 0, pointRadius: 0, fill: false },
    { label: '50% CI',        data: high50, borderWidth: 0, pointRadius: 0,
      backgroundColor: 'rgba(251, 146, 60, 0.28)', // soft orange
      fill: { target: 4 }, },

    // Forecast mean (dotted)
    { label: 'Forecast mean', data: meanF, borderWidth: 2, pointRadius: 0,
      borderDash: [6,4], tension: 0.25, borderColor: '#f97316' },

    // Historical
    { label: 'Historical', data: hist.concat(new Array(12).fill(null)),
      borderWidth: 2, pointRadius: 2, tension: 0.25, borderColor: '#e5e7eb' }
  ];

  new Chart(ctx, {
    type: 'line',
    data: {
      labels: months,
      datasets: ds
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      interaction: { mode: 'index', intersect: false },
      plugins: {
        legend: {
          labels: { color: '#cbd5e1', usePointStyle: true, boxWidth: 10 }
        },
        tooltip: {
          callbacks: {
            label: (ctx) => {
              const v = ctx.parsed.y;
              return (v === null || isNaN(v)) ? null : `${ctx.dataset.label}: ${v.toFixed(2)}%`;
            }
          }
        }
      },
      scales: {
        x: {
          ticks: { color: '#94a3b8', maxRotation: 0 },
          grid: { color: 'rgba(148,163,184,0.15)' }
        },
        y: {
          ticks: { color: '#94a3b8', callback: v => v + '%' },
          grid: { color: 'rgba(148,163,184,0.12)' }
        }
      }
    }
  });
})();
</script>
</div>
        
        <!-- Advanced Analytics Panel -->
        <div class="optimization-panel full-width" style="opacity: 1; transform: translateY(0px); transition: opacity 0.8s, transform 0.8s;">
            <div class="widget-title" style="font-size: 1.6rem; text-align: center; margin-bottom: 30px;">
                ü§ñ AI-Driven Portfolio Optimization Insights
            </div>

 <!-- Parameter selectors -->
  <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:18px; margin-bottom:20px;">
    
    <!-- Risk Tolerance -->
    <div>
      <label style="color:#f1f5f9; font-size:.9rem; margin-bottom:6px; display:block;">Risk Tolerance</label>
      <select id="riskTolerance" style="width:100%; padding:8px 12px; border-radius:10px;
        background:#1e293b; color:#f1f5f9; border:1px solid #334155; font-size:.95rem;">
        <option>Conservative</option>
        <option>Moderate</option>
        <option>Aggressive</option>
      </select>
    </div>

    <!-- Time Horizon -->
    <div>
      <label style="color:#f1f5f9; font-size:.9rem; margin-bottom:6px; display:block;">Time Horizon</label>
      <select id="timeHorizon" style="width:100%; padding:8px 12px; border-radius:10px;
        background:#1e293b; color:#f1f5f9; border:1px solid #334155; font-size:.95rem;">
        <option>1 Year</option>
        <option>3 Years</option>
        <option>5+ Years</option>
      </select>
    </div>

    <!-- Diversification Preference -->
    <div>
      <label style="color:#f1f5f9; font-size:.9rem; margin-bottom:6px; display:block;">Diversification Preference</label>
      <select id="diversificationPref" style="width:100%; padding:8px 12px; border-radius:10px;
        background:#1e293b; color:#f1f5f9; border:1px solid #334155; font-size:.95rem;">
        <option>Crypto-only</option>
        <option>Balanced (Crypto + Gold/Bonds)</option>
        <option>Strong Hedging Preference</option>
      </select>
    </div>
  </div>

            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 25px;">
                <div class="optimization-suggestion">
                    <h3 style="color: #a855f7; margin-bottom: 15px;">üìä Risk-Return Optimization</h3>
                    <p style="margin-bottom: 15px;">Current allocation shows suboptimal risk-adjusted returns. Reducing Bitcoin exposure from 48% to 35% while increasing Ethereum to 30% could improve Sharpe ratio by 13.4% while reducing portfolio volatility by 8.2%.</p>
                    <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">
                        <strong>Expected Impact:</strong><br>
                        ‚Ä¢ Sharpe Ratio: 1.34 ‚Üí 1.52 (+13.4%)<br>
                        ‚Ä¢ Max Drawdown: -18.7% ‚Üí -14.3% (-23.5%)<br>
                        ‚Ä¢ Expected Return: +12.7% ‚Üí +14.1% (+11.0%)
                    </div>
                </div>
                
                <div class="optimization-suggestion">
                    <h3 style="color: #10b981; margin-bottom: 15px;">üß† Behavioral Finance Alert</h3>
                    <p style="margin-bottom: 15px;">Analysis indicates strong overconfidence bias (8.4/10) and moderate loss aversion (6.7/10). Your BTC holding period (183 days) and concentration suggest emotional attachment rather than systematic allocation.</p>
                    <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">
                        <strong>Recommended Actions:</strong><br>
                        ‚Ä¢ Implement systematic rebalancing (quarterly)<br>
                        ‚Ä¢ Set predetermined exit rules for underperformers<br>
                        ‚Ä¢ Consider dollar-cost averaging for new positions
                    </div>
                </div>
                
                <div class="optimization-suggestion">
                    <h3 style="color: #f59e0b; margin-bottom: 15px;">üåê Network Effect Analysis</h3>
                    <p style="margin-bottom: 15px;">Ethereum's network health (8.9/10) and DeFi ecosystem growth (+23% TVL growth) suggest underweighting. Cardano shows concerning network activity decline (-18% active addresses).</p>
                    <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">
                        <strong>Network Momentum Signals:</strong><br>
                        ‚Ä¢ ETH DeFi TVL: $67.2B (+5.3% weekly)<br>
                        ‚Ä¢ SOL TPS: 2,847 (stable performance)<br>
                        ‚Ä¢ ADA Active Addresses: -18% (declining trend)
                    </div>
                </div>
                
                <div class="optimization-suggestion">
                    <h3 style="color: #06b6d4; margin-bottom: 15px;">‚öñÔ∏è Cross-Asset Diversification</h3>
                    <p style="margin-bottom: 15px;">High intra-crypto correlations (BTC-ETH: 0.74, ETH-SOL: 0.82) limit diversification benefits. Adding traditional assets could reduce overall portfolio risk by 15-20%.</p>
                    <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">
                        <strong>Diversification Opportunities:</strong><br>
                        ‚Ä¢ 10% Gold allocation: -0.12 correlation with BTC<br>
                        ‚Ä¢ 15% Treasury bonds: Negative correlation during risk-off<br>
                        ‚Ä¢ 5% Commodities: Inflation hedge potential
                    </div>
                </div>

<div class="forecasting-insight" style="background:#1e293b; border:1px solid rgba(148,163,184,.2); border-radius:14px; padding:16px; margin-bottom:16px;">
    <h3 style="color:#f59e0b; margin-bottom:10px;">üìÖ Forecasting Outlook</h3>
    <p style="margin-bottom:10px; color:#e2e8f0;">
        Based on current portfolio composition and selected parameters 
        (<b>Risk Tolerance: Conservative</b>, <b>Time Horizon: 1 Year</b>, 
        <b>Diversification: Crypto-only</b>), the model projects an 
        expected return of <b>+9.2%</b> with a <b>73% probability</b> 
        of achieving positive gains.
    </p>
    <p style="color:#cbd5e1; margin:0;">
        <strong>Forecast Range (12M, 95% CI):</strong><br>
        ‚Ä¢ Downside (5% ES): <span style="color:#ef4444;">-4.1%</span><br>
        ‚Ä¢ Median Projection: <span style="color:#22d3ee;">+7.5%</span><br>
        ‚Ä¢ Upside (95th): <span style="color:#22c55e;">+15.0%</span>
    </p>
</div>




            </div>
        </div>
        
        <div style="text-align: center; margin-top: 40px; color: #6b7280; font-size: 0.95rem; line-height: 1.6;">
            <p><strong>Academic Dashboard Prototype</strong> | University of Sydney Business School</p>
            <p>Research-backed insights integrating behavioral finance, network analysis, and portfolio optimization theory</p>
            <p style="margin-top: 15px; font-size: 0.85rem;">
                <em>All data is simulated for academic demonstration purposes. Real investment decisions should incorporate additional risk factors and professional advice.</em>
            </p>
        </div>
    </div>

    <script>
        // Chart.js Configuration and Data
        const chartConfig = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    labels: { 
                        color: '#ffffff',
                        font: { size: 12 }
                    }
                }
            },
            scales: {
                x: { 
                    ticks: { color: '#9ca3af' },
                    grid: { color: 'rgba(255, 255, 255, 0.1)' }
                },
                y: { 
                    ticks: { color: '#9ca3af' },
                    grid: { color: 'rgba(255, 255, 255, 0.1)' }
                }
            }
        };
        
        // Performance Comparison Chart
        const performanceCtx = document.getElementById('performanceChart').getContext('2d');
        new Chart(performanceCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep'],
                datasets: [
                    {
                        label: 'Current Portfolio',
                        data: [100, 108, 95, 112, 125, 118, 134, 128, 127],
                        borderColor: '#8b5cf6',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: 'Optimized Portfolio',
                        data: [100, 109, 98, 115, 128, 122, 138, 135, 142],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: 'Crypto Index',
                        data: [100, 103, 101, 107, 108, 105, 112, 109, 108],
                        borderColor: '#6b7280',
                        backgroundColor: 'rgba(107, 114, 128, 0.1)',
                        fill: false,
                        tension: 0.4,
                        borderDash: [5, 5]
                    }
                ]
            },
            options: chartConfig
        });
        
        // Risk Decomposition Chart
        const riskCtx = document.getElementById('riskChart').getContext('2d');
        new Chart(riskCtx, {
            type: 'doughnut',
            data: {
                labels: ['Bitcoin', 'Ethereum', 'Solana', 'Cardano', 'Polkadot'],
                datasets: [{
                    data: [48.2, 25.1, 8.3, 12.7, 5.7],
                    backgroundColor: [
                        'linear-gradient(45deg, #f7931a, #ffb84d)',
                        'linear-gradient(45deg, #627eea, #8fa5ff)',
                        'linear-gradient(45deg, #00d4ff, #66e0ff)',
                        'linear-gradient(45deg, #0033ad, #4d79ff)',
                        'linear-gradient(45deg, #e6007a, #ff4da6)'
                    ],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: { 
                            color: '#ffffff',
                            font: { size: 11 }
                        }
                    }
                }
            }
        });
        
        // Monte Carlo Simulation Chart
        const monteCarloCtx = document.getElementById('monteCarloChart').getContext('2d');
        
        // Generate Monte Carlo simulation data
        function generateMonteCarloData() {
            const simulations = 1000;
            const timeSteps = 252; // 1 year of trading days
            const returns = [];
            
            for (let sim = 0; sim < simulations; sim++) {
                let value = 100;
                const path = [value];
                
                for (let day = 0; day < timeSteps; day++) {
                    // Portfolio parameters based on current allocation
                    const dailyReturn = (Math.random() - 0.5) * 0.06; // ~34% annual volatility
                    value *= (1 + dailyReturn);
                    path.push(value);
                }
                returns.push(value - 100);
            }
            
            // Create histogram data
            returns.sort((a, b) => a - b);
            const bins = 50;
            const binSize = (returns[returns.length - 1] - returns[0]) / bins;
            const histogram = new Array(bins).fill(0);
            
            returns.forEach(ret => {
                const binIndex = Math.min(Math.floor((ret - returns[0]) / binSize), bins - 1);
                histogram[binIndex]++;
            });
            
            return {
                labels: Array.from({length: bins}, (_, i) => 
                    (returns[0] + i * binSize).toFixed(0)
                ),
                data: histogram
            };
        }
        
        const mcData = generateMonteCarloData();
        new Chart(monteCarloCtx, {
            type: 'bar',
            data: {
                labels: mcData.labels,
                datasets: [{
                    label: 'Frequency',
                    data: mcData.data,
                    backgroundColor: 'rgba(102, 126, 234, 0.7)',
                    borderColor: '#667eea',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    x: { 
                        title: { display: true, text: 'Portfolio Return (%)', color: '#ffffff' },
                        ticks: { color: '#9ca3af' },
                        grid: { color: 'rgba(255, 255, 255, 0.1)' }
                    },
                    y: { 
                        title: { display: true, text: 'Frequency', color: '#ffffff' },
                        ticks: { color: '#9ca3af' },
                        grid: { color: 'rgba(255, 255, 255, 0.1)' }
                    }
                }
            }
        });
        
        // Scenario Analysis Chart
        const scenarioCtx = document.getElementById('scenarioChart').getContext('2d');
        let scenarioChart = new Chart(scenarioCtx, {
            type: 'line',
            data: {
                labels: Array.from({length: 12}, (_, i) => `Month ${i+1}`),
                datasets: [
                    {
                        label: 'Base Case',
                        data: [100, 102, 105, 103, 108, 111, 115, 112, 118, 122, 125, 127],
                        borderColor: '#6b7280',
                        backgroundColor: 'rgba(107, 114, 128, 0.1)',
                        tension: 0.4
                    },
                    {
                        label: 'Market Crash Scenario',
                        data: [100, 95, 87, 82, 78, 85, 92, 88, 95, 98, 102, 105],
                        borderColor: '#ef4444',
                        backgroundColor: 'rgba(239, 68, 68, 0.1)',
                        tension: 0.4
                    },
                    {
                        label: 'Adoption Surge Scenario',
                        data: [100, 108, 125, 135, 148, 162, 178, 165, 185, 195, 210, 225],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.4
                    }
                ]
            },
            options: chartConfig
        });
        
        // Interactive Scenario Controls
        function updateScenarioChart() {
            const crashWeight = document.getElementById('crashScenario').value / 100;
            const regWeight = document.getElementById('regScenario').value / 100;
            const adoptionWeight = document.getElementById('adoptionScenario').value / 100;
            
            document.getElementById('crashValue').textContent = `${Math.round(crashWeight * 100)}%`;
            document.getElementById('regValue').textContent = `${Math.round(regWeight * 100)}%`;
            document.getElementById('adoptionValue').textContent = `${Math.round(adoptionWeight * 100)}%`;
            
            // Update scenario data based on slider values
            const baseData = [100, 102, 105, 103, 108, 111, 115, 112, 118, 122, 125, 127];
            const crashData = [100, 95, 87, 82, 78, 85, 92, 88, 95, 98, 102, 105];
            const adoptionData = [100, 108, 125, 135, 148, 162, 178, 165, 185, 195, 210, 225];
            
            const weightedScenario = baseData.map((base, i) => 
                base * (1 - crashWeight - regWeight) + 
                crashData[i] * crashWeight + 
                adoptionData[i] * adoptionWeight
            );
            
            scenarioChart.data.datasets[0].data = weightedScenario;
            scenarioChart.update();
        }
        
        // Event listeners for sliders
        document.getElementById('crashScenario').addEventListener('input', updateScenarioChart);
        document.getElementById('regScenario').addEventListener('input', updateScenarioChart);
        document.getElementById('adoptionScenario').addEventListener('input', updateScenarioChart);
        
        // Portfolio optimization function
        function rebalancePortfolio() {
            // Simulate optimization process
            const optimization = document.createElement('div');
            optimization.style.cssText = 'position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.9); color: white; padding: 30px; border-radius: 15px; z-index: 1000; text-align: center; min-width: 300px;';
            optimization.innerHTML = `
                <h3 style="margin-bottom: 20px;">üîÑ Optimizing Portfolio...</h3>
                <div style="width: 100%; height: 6px; background: #374151; border-radius: 3px; overflow: hidden;">
                    <div style="height: 100%; background: linear-gradient(90deg, #667eea, #764ba2); width: 0%; transition: width 2s ease;" id="progressBar"></div>
                </div>
                <div style="margin-top: 15px; font-size: 0.9rem; color: #9ca3af;">
                    Running Monte Carlo simulations...<br>
                    Calculating efficient frontier...<br>
                    Optimizing risk-adjusted returns...
                </div>
            `;
            document.body.appendChild(optimization);
            
            // Animate progress bar
            setTimeout(() => {
                document.getElementById('progressBar').style.width = '100%';
            }, 100);
            
            // Show results after animation
            setTimeout(() => {
                optimization.innerHTML = `
                    <h3 style="margin-bottom: 20px; color: #10b981;">‚úÖ Optimization Complete</h3>
                    <div style="text-align: left; margin-bottom: 20px;">
                        <strong>Recommended Allocation:</strong><br>
                        ‚Ä¢ Bitcoin: 48% ‚Üí 35% (-13%)<br>
                        ‚Ä¢ Ethereum: 25% ‚Üí 30% (+5%)<br>
                        ‚Ä¢ Solana: 8% ‚Üí 15% (+7%)<br>
                        ‚Ä¢ Cardano: 13% ‚Üí 10% (-3%)<br>
                        ‚Ä¢ Polkadot: 6% ‚Üí 10% (+4%)
                    </div>
                    <div style="background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                        <strong>Expected Improvement:</strong><br>
                        Sharpe Ratio: +13.4% | Max Drawdown: -23.5%
                    </div>
                    <button onclick="this.parentElement.remove()" style="background: #667eea; border: none; padding: 10px 20px; border-radius: 6px; color: white; cursor: pointer;">Close</button>
                `;
            }, 2500);
        }
        
        // Initialize with animation
        document.addEventListener('DOMContentLoaded', function() {
            const widgets = document.querySelectorAll('.widget, .sidebar');
            widgets.forEach((widget, index) => {
                widget.style.opacity = '0';
                widget.style.transform = 'translateY(30px)';
                setTimeout(() => {
                    widget.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
                    widget.style.opacity = '1';
                    widget.style.transform = 'translateY(0)';
                }, index * 150);
            });
        });
    </script>

</div></body></html>